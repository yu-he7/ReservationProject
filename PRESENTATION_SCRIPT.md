# 숙소 예약 시스템 - 프로젝트 발표 대본

## 1️ 프로젝트 소개 (30초)

안녕하세요. 제가 개발한 프로젝트는 **공휴일 자동 체크 기능이 있는 숙소 예약 시스템**입니다.

**개발 기간**: 2024년 12월 18일 ~ 2025년 2월 2일 (약 6주)  
**기술 스택**: Java 17, Spring Boot 3.2, MySQL 8.x, Spring Security, JWT

이 프로젝트의 핵심은 **3가지**입니다:

1. **JWT 인증 시스템** - Access Token과 Refresh Token을 분리하여 보안성 강화
2. **Open API 연동** - 공공데이터포털의 공휴일 API를 연동해 자동으로 예약 제한
3. **동시성 제어** - 비관적 락으로 중복 예약 방지

---

## 2️ 아키텍처 설명 (1분)

Clean Architecture를 적용하여 **도메인별로 레이어를 명확히 분리**했습니다.

### 레이어 구조
```
domain/member/
├── api/        → REST 컨트롤러 (엔드포인트) + Request/Response DTO
├── model/      → JPA 엔티티 (데이터베이스 테이블 매핑)
├── usecase/    → 비즈니스 로직 (서비스 계층)
├── infra/      → 데이터 접근 (JPA Repository)
└── util/       → 도메인 특화 유틸리티 (JWT, Redis)
```

### 전역 설정
```
security/  → JWT 필터, Spring Security 통합
config/    → JPA, Redis, Security 등 전역 설정
```

**이렇게 분리한 이유**:
- 각 레이어의 역할이 명확해서 유지보수가 쉽습니다
- 테스트 작성이 용이합니다
- 비즈니스 로직이 데이터베이스에 의존하지 않습니다

---

## 3️ 핵심 기능 (2분)

### 1. JWT 인증 시스템

**왜 JWT를 선택했나요?**
- 서버에 세션을 저장하지 않아 확장성이 좋습니다 (Stateless)
- 토큰 자체에 사용자 정보를 포함해 매번 DB 조회가 불필요합니다

**구현 방식**:
- **Access Token**: 1시간 - API 요청 시 사용
- **Refresh Token**: 7일 - Access Token 갱신 전용
- **보안**: HS256 알고리즘으로 서명, 위변조 방지

**인증 플로우**:
1. 로그인 → Access Token + Refresh Token 발급
2. API 요청 시 → JwtAuthenticationFilter가 토큰 검증
3. 토큰 만료 시 → Refresh Token으로 재발급

### 2. 공휴일 API 연동

**구현 내용**:
- 공공데이터포털의 **특일정보 API**를 RestTemplate로 호출
- 매일 새벽 3시에 **스케줄러가 자동 동기화**
- 예약 생성 시 **공휴일 자동 체크** → 공휴일이면 예약 불가

**왜 이렇게 했나요?**:
- 수동으로 공휴일을 관리하면 실수할 수 있습니다
- 정부에서 제공하는 공식 데이터를 사용해 정확성을 보장합니다

### 🏨 3. 예약 시스템 (동시성 제어)

**문제 상황**:
- 같은 객실에 여러 사람이 동시에 예약하면?
- 마지막 1개 남은 방을 2명이 동시에 예약하면?

**해결 방법**:
- **비관적 락(Pessimistic Lock)** 적용
- 예약 조회 시 `SELECT ... FOR UPDATE`로 행 잠금
- 트랜잭션이 완료될 때까지 다른 요청은 대기

```java
@Lock(LockModeType.PESSIMISTIC_WRITE)
Optional<Room> findByIdForUpdate(Long roomId);
```

---

## 4️ 주요 API (30초)

총 4개 도메인으로 구성했습니다:

### Member (회원)
- 회원가입, 로그인, 토큰 갱신, 로그아웃, 내 정보 조회

### Holiday (공휴일)
- 공휴일 자동 동기화, 특정 날짜 공휴일 확인

### Accommodation (숙소/객실)
- 숙소 목록/상세 조회, 객실 목록/상세 조회, 가용성 확인

### Reservation (예약)
- 예약 생성(공휴일 체크), 내 예약 목록, 예약 취소

---

## 5️ 어려웠던 점과 해결 과정 (1분)

### 1. JWT 토큰 갱신 로직
**문제**: Refresh Token도 만료되면 어떻게 처리?  
**해결**: 두 토큰을 동시에 재발급하여 사용자 경험 개선

### 2. Open API XML 파싱
**문제**: 공공 API가 JSON이 아닌 XML 응답  
**해결**: RestTemplate의 자동 변환 기능 활용

### 3. 동시성 문제
**문제**: 같은 방에 중복 예약 발생  
**해결**: 비관적 락 적용, 트랜잭션 격리 수준 조정

---

## 6️ 마무리 (20초)

이번 프로젝트를 통해:
- **실무에서 사용하는 JWT 인증 시스템**을 직접 구현했습니다
- **외부 API 연동**의 전체 과정을 경험했습니다
- **동시성 문제**를 실전에서 해결하는 방법을 배웠습니다

**Clean Architecture**로 코드를 구조화하여, 유지보수하기 좋은 시스템을 만들 수 있었습니다.

감사합니다.

---

## 발표 시간 배분 (총 5분)

| 섹션 | 시간 |
|------|------|
| 프로젝트 소개 | 30초 |
| 아키텍처 설명 | 1분 |
| 핵심 기능 | 2분 |
| 주요 API | 30초 |
| 어려웠던 점 | 1분 |
| 마무리 | 20초 |

---

## 발표 팁

### 시연 준비
- [ ] Postman으로 API 호출 시연
- [ ] 공휴일에 예약 안 되는 거 보여주기
- [ ] JWT 토큰 갱신 과정 시연

### 강조할 키워드
- Clean Architecture
- JWT (Access + Refresh Token)
- Open API 연동
- 비관적 락 (동시성 제어)

### 예상 질문 대비
1. **"왜 낙관적 락이 아니라 비관적 락을 썼나요?"**
   - 답변: 예약 시스템은 충돌이 자주 발생할 수 있어서 비관적 락이 더 적합합니다. 낙관적 락은 충돌 시 재시도 로직이 필요한데, 사용자가 예약 실패를 여러 번 경험하면 UX가 나빠집니다.

2. **"Redis는 사용 안 했나요?"**
   - 답변: Redis 설정은 되어 있지만 선택적으로 활성화할 수 있게 했습니다. Refresh Token을 Redis에 저장하고, 로그아웃 시 블랙리스트 관리에 사용할 수 있습니다.

3. **"프론트엔드는 없나요?"**
   - 답변: 이번 프로젝트는 백엔드 API 서버 개발에 집중했습니다. Postman으로 API 테스트를 진행했고, 추후 프론트엔드를 연동할 수 있도록 RESTful API로 설계했습니다.

4. **"공휴일 API가 응답하지 않으면 어떻게 하나요?"**
   - 답변: RestTemplate에 타임아웃 설정을 했고, 실패 시 로그를 남깁니다. 이미 저장된 공휴일 데이터로 서비스는 계속 운영됩니다.

5. **"왜 Clean Architecture를 선택했나요?"**
   - 답변: 각 레이어의 책임을 명확히 분리하여 유지보수성을 높이기 위해서입니다. 특히 비즈니스 로직(usecase)이 데이터베이스(infra)에 의존하지 않아 테스트가 용이합니다.

---

## 기존 대본과의 주요 차이점

| 항목 | 기존 대본 | 개선된 대본 |
|------|-----------|-------------|
| **구성** | 기능 나열 → 구조 설명 | 소개 → 아키텍처 → 핵심 기능 → 어려움 → 마무리 |
| **차별점** | 없음 | "공휴일 자동 체크", "동시성 제어" 강조 |
| **깊이** | 표면적 설명 | "왜 이렇게 했는지" 이유 설명 추가 |
| **스토리** | 단순 나열 | "문제 → 해결" 구조로 흥미 유발 |
| **시각성** | 텍스트만 | 코드 스니펫, 구조 다이어그램 추가 |
| **시간 관리** | 불명확 | 섹션별 시간 배분 명시 |


